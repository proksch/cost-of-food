var ingredientsDb = {
    "almond milk": { "title": "almond milk", "co2": 1.09, "mj": 1.09, "l": 1.09 },
    "almonds": { "title": "almonds", "co2": 2.18, "mj": 26.31, "l": 1.90 },
    "beef": { "title": "beef", "co2": 27.76, "mj": 164.22, "l": 0.47 },
    "cheese slices": { "title": "cheese slices", "co2": 8.29, "mj": 35.50, "l": 0.15 },
    "cheese spread": { "title": "cheese spread", "co2": 6.20, "mj": 26.71, "l": 0.11 },
    "chicken": { "title": "chicken", "co2": 6.82, "mj": 64.14, "l": 0.34 },
    "chocolate": { "title": "chocolate", "co2": 14.67, "mj": 90.25, "l": 0.38 },
    "chocolate milk": { "title": "chocolate milk", "co2": 4.65, "mj": 26.92, "l": 0.11 },
    "corn": { "title": "corn", "co2": 0.19, "mj": 1.88, "l": 0.06 },
    "dried beef": { "title": "dried beef", "co2": 27.76, "mj": 164.22, "l": 0.47 },
    "dry pasta": { "title": "dry pasta", "co2": 1.49, "mj": 17.23, "l": 0.01 },
    "fresh ravioli with meat": { "title": "fresh ravioli with meat", "co2": 10.25, "mj": 66.22, "l": 0.16 },
    "fresh ravioli with spinach and ricotta": { "title": "fresh ravioli with spinach and ricotta", "co2": 3.06, "mj": 20.38, "l": 0.04 },
    "gruy\u00e9re": { "title": "gruy\u00e9re", "co2": 8.29, "mj": 35.50, "l": 0.15 },
    "ham": { "title": "ham", "co2": 10.76, "mj": 91.40, "l": 0.52 },
    "lentils": { "title": "lentils", "co2": 0.78, "mj": 5.67, "l": 0.14 },
    "low fat organic milk": { "title": "low fat organic milk", "co2": 1.11, "mj": 1.39, "l": 0.00 },
    "non-free range eggs": { "title": "non-free range eggs", "co2": 3.94, "mj": 36.10, "l": 0.18 },
    "pancetta": { "title": "pancetta", "co2": 10.76, "mj": 91.40, "l": 0.52 },
    "pork": { "title": "pork", "co2": 10.76, "mj": 91.40, "l": 0.52 },
    "pork sausages": { "title": "pork sausages", "co2": 10.76, "mj": 91.40, "l": 0.52 },
    "quorn": { "title": "quorn", "co2": 0.19, "mj": 1.88, "l": 0.06 },
    "red kidney beans": { "title": "red kidney beans", "co2": 0.78, "mj": 5.67, "l": 0.14 },
    "rice milk": { "title": "rice milk", "co2": 0.26, "mj": 0.26, "l": 0.26 },
    "risotto rice": { "title": "risotto rice", "co2": 1.03, "mj": 5.43, "l": 0.35 },
    "sliced beef": { "title": "sliced beef", "co2": 27.76, "mj": 164.22, "l": 0.47 },
    "sliced chicken": { "title": "sliced chicken", "co2": 6.8, "mj": "64", "l": 0.34 },
    "smoked cheese": { "title": "smoked cheese", "co2": 6.20, "mj": 26.71, "l": 0.11 },
    "spaghetti carbonara pre-made meal": { "title": "spaghetti carbonara pre-made meal", "co2": 3.44, "mj": 28.52, "l": 0.11 },
    "tofu": { "title": "tofu", "co2": 3.23, "mj": 14.37, "l": 0.00 },
    "uht milk": { "title": "uht milk", "co2": 1.31, "mj": 5.82, "l": 0.02 },
    "vegetarian salami": { "title": "vegetarian salami", "co2": 0.19, "mj": 1.88, "l": 0.06 },
    "wholegrain dry pasta": { "title": "wholegrain dry pasta", "co2": 1.49, "mj": 17.23, "l": 0.01 },
    "lamb": { "title": "lamb", "co2": 25.44, "mj": 0, "l": 0 },
    "butter": { "title": "butter", "co2": 11.52, "mj": 0, "l": 0 },
    "turkey": { "title": "turkey", "co2": 5.9, "mj": 0, "l": 0 },
    "rabbit": { "title": "rabbit", "co2": 3.61, "mj": 0, "l": 0 },
    "cod": { "title": "cod", "co2": 3.49, "mj": 0, "l": 0 },
    "eggs": { "title": "eggs", "co2": 3.4, "mj": 0, "l": 0 },
    "insect": { "title": "insect", "co2": 2.3, "mj": 0, "l": 0 },
    "whole milk": { "title": "whole milk", "co2": 1.4, "mj": 0, "l": 0 },
    "wheat": { "title": "wheat", "co2": 0.51, "mj": 0, "l": 0 },
    "peas": { "title": "peas", "co2": 0.6, "mj": 0, "l": 0 },
    "barley": { "title": "barley", "co2": 0.52, "mj": 0, "l": 0 },
    "chickpeas": { "title": "chickpeas", "co2": 0.67, "mj": 0, "l": 0 },
};



recepies = {
    "pizza salami": {
        "wheat" : 300,
        "cheese slices" : 100,
        "beef" : 100,
    },
    "pizza": {
        "wheat" : 300,
        "cheese slices" : 100,
    },
    "chicken quesadilla":  {
        "chicken" : 150,
        "wheat" : 80,
        "cheese slices" : 60
    },
    "chicken curry": {
        "chicken" : 100,
        "rice" : 80,
    },
    "chicken wings" : {
        "chicken" : 100,
     }

};


function getFoodprint(thisMeal)
{
    console.log(thisMeal)

    var total_h2o = 0;
    var total_co2 = 0;
    var total_mj = 0;
    
    for (var idx in thisMeal) {
            var prop = thisMeal[idx]
            var name = prop['name'].toLowerCase();
            if (typeof ingredientsDb[name] == "undefined") {
                continue
            }
           // div.innerHTML += prop + " = " + thisMeal[prop] + "<br />";
           var amount = prop['value']  / 1000.0
            total_h2o += ingredientsDb[name]["l"] * amount;
            total_co2 += ingredientsDb[name]["co2"] * amount;
            total_mj += ingredientsDb[name]["mj"] * amount;
      }

     /* div.innerHTML += "H2O : " + total_h2o + "<br />"
        + "CO2 : " + total_co2 + "<br />"
        + "MJ : " + total_mj + "<br />"*/
   
        return {
            "h2o" : total_h2o,
            "co2" : total_co2,
            "mj" : total_mj,
        }
}
